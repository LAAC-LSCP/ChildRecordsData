

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>How to reuse extant LAAC datasets &mdash; ChildRecordsData 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Converting a dataset" href="vandam.html" />
    <link rel="prev" title="Datasets structure" href="format.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ChildRecordsData
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting-started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-data.html">Getting some data</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html">Datasets structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to reuse extant LAAC datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-datalad">Installing datalad</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-a-dataset">Installing a dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-your-ssh-access-to-github">Setting up your ssh access to GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-your-ssh-access-to-oberon">Setting up your ssh access to Oberon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cloning-the-dataset">Cloning the dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-large-files">Downloading large files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-a-dataset">Updating a dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-all-our-datasets-at-once">Installing all our datasets at once</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pushing-changes-to-a-dataset">Pushing changes to a dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vandam.html">Converting a dataset</a></li>
</ul>
<p class="caption"><span class="caption-text">Command-line tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Basic tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="zooniverse.html">Zooniverse</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheatsheet</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ChildRecordsData</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>How to reuse extant LAAC datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/reuse.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-reuse-extant-laac-datasets">
<h1>How to reuse extant LAAC datasets<a class="headerlink" href="#how-to-reuse-extant-laac-datasets" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#how-to-reuse-extant-laac-datasets">How to reuse extant LAAC
datasets</a></p>
<ul>
<li><p><a class="reference external" href="#how-it-works">How it works</a></p></li>
<li><p><a class="reference external" href="#installing-datalad">Installing datalad</a></p></li>
<li><p><a class="reference external" href="#installing-a-dataset">Installing a dataset</a></p>
<ul>
<li><p><a class="reference external" href="#setting-up-your-ssh-access-to-github">Setting up your ssh access to
GitHub</a></p></li>
<li><p><a class="reference external" href="#setting-up-your-ssh-access-to-oberon">Setting up your ssh access to
Oberon</a></p></li>
<li><p><a class="reference external" href="#datalad-way-using-only-datalad">Cloning the dataset</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#downloading-large-files">Downloading large files</a></p></li>
<li><p><a class="reference external" href="#updating-a-dataset">Updating a dataset</a></p></li>
<li><p><a class="reference external" href="#installing-all-our-datasets-at-once">Installing all our datasets at
once</a></p></li>
<li><p><a class="reference external" href="#contributing">Contributing</a></p>
<ul>
<li><p><a class="reference external" href="#pushing-changes-to-a-dataset">Pushing changes to a
dataset</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Our datasets rely on <a class="reference external" href="https://www.datalad.org/">datalad</a>. Datalad
allows the versioning and distribution of large datasets. Datalad relies
on another tool called
<a class="reference external" href="https://git-annex.branchable.com/">git-annex</a>, which itself is an
extension of git providing support for large file versioning with a high
flexibility.</p>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Our dataset are distributed on two “siblings”. Siblings are analogous to
git and git-annex remotes. The github remote doesn’t include large
files, only pointers refering to them. The large files are stored in a
sibling hosted on Oberon, our lab cluster:</p>
<div class="figure align-default" id="id1">
<img alt="Dataset infrastructure" src="_images/infrastructure.png" />
<p class="caption"><span class="caption-text">LAAC datasets storage infrastructure</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="installing-datalad">
<h2>Installing datalad<a class="headerlink" href="#installing-datalad" title="Permalink to this headline">¶</a></h2>
<p><em>Important: datasets are hosted on github and oberon. This means you are
required access to our private github repositories as well as ssh access
to oberon. You will be prompted for credentials everytime you issue
datalad commands, so we recommand using SSH keys and enabling the
Keychain (append ``~/.ssh/config`` with ``UseKeychain yes``).</em></p>
<ol class="arabic simple">
<li><p>Install git-annex using <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">git-annex</span></code> (linux) or
<code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">git-annex</span></code> (mac). Git-annex is available by default
on Oberon.</p></li>
<li><p>Install datalad with pip : <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">datalad</span></code> (or
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">datalad</span> <span class="pre">--user</span></code> in case of permission issues)</p></li>
</ol>
<p>If you are still having permission issues, consider using python virtual
environments or conda. Otherwise, refer to your system administrator.</p>
</div>
<div class="section" id="installing-a-dataset">
<h2>Installing a dataset<a class="headerlink" href="#installing-a-dataset" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-your-ssh-access-to-github">
<h3>Setting up your ssh access to GitHub<a class="headerlink" href="#setting-up-your-ssh-access-to-github" title="Permalink to this headline">¶</a></h3>
<p>This step shall only be done once for all. Since our datasets are
partially hosted on GitHub private repositories, authentication is
needed to access them. I highly recommend that you use SSH
authentication, for security and simplicity. I will only provide
instructions for SSH authentication, and leave HTTPS authentication to
consenting adults. Here are the steps:</p>
<ol class="arabic simple">
<li><p>Copy your SSH public key (usually located in <code class="docutils literal notranslate"><span class="pre">~/.ssh/id_rsa.pub</span></code>)</p></li>
<li><p>Go to <a class="reference external" href="https://github.com/settings/keys">GitHub.com &gt; Settings &gt; SSH and GPG
Keys</a></p></li>
<li><p>Click on the green button ‘New SSH key’ and paste your public key
where requested.</p></li>
</ol>
</div>
<div class="section" id="setting-up-your-ssh-access-to-oberon">
<h3>Setting up your ssh access to Oberon<a class="headerlink" href="#setting-up-your-ssh-access-to-oberon" title="Permalink to this headline">¶</a></h3>
<p>The actual content of the large files (e.g. recordings) is stored on the
lab cluster (Oberon). Therefore, you need ssh access to the cluster to
retrieve them.</p>
<p>If you can already ssh into Oberon with an alias by doing
<code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">foberon</span></code> or <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">oberon</span></code> or similar, skip this step. Otherwise,
follow these instructions to setup ssh properly:</p>
<ol class="arabic simple">
<li><p>Add the following lines to your <code class="docutils literal notranslate"><span class="pre">~/.ssh/config</span></code> file, replacing
<code class="docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code> by your actual username:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Host</span> <span class="n">flores</span>
   <span class="n">Hostname</span> <span class="n">cognitive</span><span class="o">-</span><span class="n">ml</span><span class="o">.</span><span class="n">fr</span>
   <span class="n">User</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>

<span class="n">Host</span> <span class="n">foberon</span>
   <span class="n">Hostname</span> <span class="n">oberon</span>
   <span class="n">User</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
   <span class="n">ProxyJump</span> <span class="n">flores</span>

<span class="n">Host</span> <span class="o">*</span>
<span class="n">ForwardX11</span> <span class="n">yes</span>
<span class="n">UseKeychain</span> <span class="n">yes</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Try to SSH into oberon by typing <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">foberon</span></code>. You will be
prompted for your credentials.</p></li>
</ol>
</div>
<div class="section" id="cloning-the-dataset">
<h3>Cloning the dataset<a class="headerlink" href="#cloning-the-dataset" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>The first step is to clone the dataset from github, for instance :</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">LAAC</span><span class="o">-</span><span class="n">LSCP</span><span class="o">/</span><span class="n">namibia</span><span class="o">-</span><span class="n">data</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">namibia</span><span class="o">-</span><span class="n">data</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>The next step is configure the access to the cluster (where large
files are stored). If you are installing the dataset on oberon, you
just have to type :</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">run</span><span class="o">-</span><span class="n">procedure</span> <span class="n">setup</span>
</pre></div>
</div>
<p>Otherwise, you need to specify the SSH alias for Oberon on your system.
If you followed the previous steps to setup your SSH access to Oberon,
it should be <code class="docutils literal notranslate"><span class="pre">foberon</span></code> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">run</span><span class="o">-</span><span class="n">procedure</span> <span class="n">setup</span> <span class="n">foberon</span>
</pre></div>
</div>
<p>That’s it ! Your dataset is ready to go. By default, large files do not
get downloaded automatically. See the next section for help with
downloading those files.</p>
</div>
</div>
<div class="section" id="downloading-large-files">
<h2>Downloading large files<a class="headerlink" href="#downloading-large-files" title="Permalink to this headline">¶</a></h2>
<p>Files can be retrieved using <code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">get</span> <span class="pre">[path]</span></code>. For instance,
<code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">get</span> <span class="pre">recordings</span></code> will download all recordings.</p>
</div>
<div class="section" id="updating-a-dataset">
<h2>Updating a dataset<a class="headerlink" href="#updating-a-dataset" title="Permalink to this headline">¶</a></h2>
<p>A dataset can be updated from the sources using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> together
with <code class="docutils literal notranslate"><span class="pre">dataset</span> <span class="pre">update</span></code>.</p>
</div>
<div class="section" id="installing-all-our-datasets-at-once">
<h2>Installing all our datasets at once<a class="headerlink" href="#installing-all-our-datasets-at-once" title="Permalink to this headline">¶</a></h2>
<p>In order to install the superdataset, run the following commands :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">LAAC</span><span class="o">-</span><span class="n">LSCP</span><span class="o">/</span><span class="n">datasets</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">datasets</span>
<span class="n">datalad</span> <span class="n">run</span><span class="o">-</span><span class="n">procedure</span> <span class="n">setup</span> <span class="o">&lt;</span><span class="n">oberon_alias</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Make sure to replace <code class="docutils literal notranslate"><span class="pre">&lt;oberon_alias&gt;</span></code> with whatever alias you use to
ssh into Oberon. If you have followed <a class="reference external" href="https://laac-lscp.github.io/ChildRecordsData/REUSE.html#setting-up-your-ssh-access-to-oberon">our
instructions</a>,
it should be <code class="docutils literal notranslate"><span class="pre">foberon</span></code>.</p>
<p>You’re good to go. You can download data from any dataset, e.g. by doing
<code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">get</span> <span class="pre">solomon-data/annotations</span></code>.</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pushing-changes-to-a-dataset">
<h3>Pushing changes to a dataset<a class="headerlink" href="#pushing-changes-to-a-dataset" title="Permalink to this headline">¶</a></h3>
<p>You can save local changes to a dataset with
<code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">save</span> <span class="pre">[path]</span> <span class="pre">-m</span> <span class="pre">&quot;commit</span> <span class="pre">message&quot;</span></code>. For instance :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">save</span> <span class="n">raw_annotations</span><span class="o">/</span><span class="n">vtc</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;adding vtc rttms&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">save</span></code> is analoguous to a combination of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p>
<p>These changes still have to be pushed, which can be done with :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">push</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="vandam.html" class="btn btn-neutral float-right" title="Converting a dataset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="format.html" class="btn btn-neutral float-left" title="Datasets structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Lucas Gautheron.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>