

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Basic tools &mdash; ChildRecordsData 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Zooniverse" href="zooniverse.html" />
    <link rel="prev" title="Converting a dataset" href="vandam.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ChildRecordsData
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting-started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-data.html">Getting some data</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html">Datasets structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reuse.html">How to reuse extant LAAC datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="vandam.html">Converting a dataset</a></li>
</ul>
<p class="caption"><span class="caption-text">Command-line tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-validation">Data validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#convert-recordings">Convert recordings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-core-audio-conversion-with-slurm-on-a-cluster">Multi-core audio conversion with slurm on a cluster</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#compute-recordings-duration">Compute recordings duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-annotations">Managing annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#importation">Importation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#single-file-importation">Single file importation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bulk-importation">Bulk importation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rename-a-set-of-annotations">Rename a set of annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-a-set-of-annotations">Remove a set of annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#its-annotations-anonymization">ITS annotations anonymization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merge-annotation-sets">Merge annotation sets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zooniverse.html">Zooniverse</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheatsheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Package reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">ChildProject</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ChildRecordsData</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Basic tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-tools">
<h1>Basic tools<a class="headerlink" href="#basic-tools" title="Permalink to this headline">¶</a></h1>
<div class="section" id="data-validation">
<h2>Data validation<a class="headerlink" href="#data-validation" title="Permalink to this headline">¶</a></h2>
<p>This is typically done (repeatedly!) in the process of importing your
data into our format for the first time, but you should also do this
whenever you make a change to the dataset.</p>
<p>Looks for errors and inconsistency in the metadata, or for missing
audios. The validation will pass if formatting instructions are met
(see <a class="reference internal" href="format.html#format"><span class="std std-ref">Datasets structure</span></a>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project validate /path/to/dataset --help
usage: child-project validate <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--ignore-files<span class="o">]</span> <span class="o">[</span>--check-annotations<span class="o">]</span>
                              <span class="o">[</span>--threads THREADS<span class="o">]</span>
                              <span class="nb">source</span>

validate the consistency of the dataset returning detailed errors and warnings

positional arguments:
  <span class="nb">source</span>               project path

optional arguments:
  -h, --help           show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --ignore-files       ignore missing audio files
  --check-annotations  check all imported annotations <span class="k">for</span> errors
  --threads THREADS    amount of threads to run on <span class="o">(</span>only applies to --check-
                       annotations<span class="o">)</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">validate</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-recordings">
<h2>Convert recordings<a class="headerlink" href="#convert-recordings" title="Permalink to this headline">¶</a></h2>
<p>Converts all recordings in a dataset to a given encoding. Converted
audios are stored into <code class="docutils literal notranslate"><span class="pre">recordings/converted/&lt;profile-name&gt;</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project convert /path/to/dataset --help
usage: child-project convert <span class="o">[</span>-h<span class="o">]</span> --name NAME --format FORMAT --codec CODEC
                             --sampling SAMPLING <span class="o">[</span>--split SPLIT<span class="o">]</span>
                             <span class="o">[</span>--skip-existing<span class="o">]</span> <span class="o">[</span>--threads THREADS<span class="o">]</span>
                             path

positional arguments:
  path                 project path

optional arguments:
  -h, --help           show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --name NAME          profile name
  --format FORMAT      audio format <span class="o">(</span>e.g. wav<span class="o">)</span>
  --codec CODEC        audio codec <span class="o">(</span>e.g. pcm_s16le<span class="o">)</span>
  --sampling SAMPLING  sampling frequency <span class="o">(</span>e.g. <span class="m">16000</span><span class="o">)</span>
  --split SPLIT        split duration <span class="o">(</span>e.g. <span class="m">15</span>:00:00<span class="o">)</span>
  --skip-existing
  --threads THREADS    amount of threads running conversions <span class="k">in</span> parallel <span class="o">(</span><span class="nv">0</span> <span class="o">=</span>
                       uses all available cores<span class="o">)</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">convert</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="mi">16</span><span class="n">kHz</span> <span class="o">--</span><span class="nb">format</span><span class="o">=</span><span class="n">wav</span> <span class="o">--</span><span class="n">sampling</span><span class="o">=</span><span class="mi">16000</span> <span class="o">--</span><span class="n">codec</span><span class="o">=</span><span class="n">pcm_s16le</span>
</pre></div>
</div>
<p>We typically run the following, to split long sound files every 15
hours, because the software we use for human annotation (ELAN, Praat)
works better with audio that is maximally 15h long:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">convert</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="mi">16</span><span class="n">kHz</span> <span class="o">--</span><span class="n">split</span><span class="o">=</span><span class="mi">15</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">--</span><span class="nb">format</span><span class="o">=</span><span class="n">wav</span> <span class="o">--</span><span class="n">sampling</span><span class="o">=</span><span class="mi">16000</span> <span class="o">--</span><span class="n">codec</span><span class="o">=</span><span class="n">pcm_s16le</span>
</pre></div>
</div>
<div class="section" id="multi-core-audio-conversion-with-slurm-on-a-cluster">
<h3>Multi-core audio conversion with slurm on a cluster<a class="headerlink" href="#multi-core-audio-conversion-with-slurm-on-a-cluster" title="Permalink to this headline">¶</a></h3>
<p>If you have access to a cluster with slurm, you can use a command like
the one below to batch-convert your recordings. Please note that you may
need to change some details depending on your cluster (eg cpus per
task). If needed, refer to the <a class="reference external" href="https://slurm.schedmd.com/quickstart.html">slurm user
guide</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sbatch --mem=64G --time=5:00:00 --cpus-per-task=4 --ntasks=1 -o namibia.txt child-project convert /path/to/dataset --name standard --format WAV --codec pcm_s16le --sampling 16000 --threads 4`
</pre></div>
</div>
</div>
</div>
<div class="section" id="compute-recordings-duration">
<h2>Compute recordings duration<a class="headerlink" href="#compute-recordings-duration" title="Permalink to this headline">¶</a></h2>
<p>Compute recordings duration and store in into a column named ‘duration’
in the metadata.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project compute-durations /path/to/dataset --help
usage: child-project compute-durations <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--profile PROFILE<span class="o">]</span> <span class="o">[</span>--force<span class="o">]</span>
                                       <span class="nb">source</span>

creates a <span class="s1">&#39;duration&#39;</span> column into metadata/recordings

positional arguments:
  <span class="nb">source</span>             <span class="nb">source</span> data path

optional arguments:
  -h, --help         show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --profile PROFILE  which audio profile to use
  --force            overwrite <span class="k">if</span> column exists
</pre></div>
</div>
</div>
<div class="section" id="managing-annotations">
<h2>Managing annotations<a class="headerlink" href="#managing-annotations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="importation">
<h3>Importation<a class="headerlink" href="#importation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="single-file-importation">
<h4>Single file importation<a class="headerlink" href="#single-file-importation" title="Permalink to this headline">¶</a></h4>
<p>Annotations can be imported one by one or in bulk. Annotation
importation does the following :</p>
<ol class="arabic simple">
<li><p>Convert all input annotations from their original format (e.g. rttm,
eaf, textgrid..) into the CSV format defined at <a class="reference internal" href="format.html#format-input-annotations"><span class="std std-ref">Annotation importation input format</span></a>
and stores them into <code class="docutils literal notranslate"><span class="pre">annotations/</span></code>.</p></li>
<li><p>Registers them to the annotation index at
<code class="docutils literal notranslate"><span class="pre">metadata/annotations.csv</span></code></p></li>
</ol>
<p>Use <code class="docutils literal notranslate"><span class="pre">child-project</span> <span class="pre">import-annotations</span></code> to import a single annotation
file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project import-annotations /path/to/dataset --help
usage: child-project import-annotations <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--annotations ANNOTATIONS<span class="o">]</span>
                                        <span class="o">[</span>--threads THREADS<span class="o">]</span> <span class="o">[</span>--set SET<span class="o">]</span>
                                        <span class="o">[</span>--recording_filename RECORDING_FILENAME<span class="o">]</span>
                                        <span class="o">[</span>--time_seek TIME_SEEK<span class="o">]</span>
                                        <span class="o">[</span>--range_onset RANGE_ONSET<span class="o">]</span>
                                        <span class="o">[</span>--range_offset RANGE_OFFSET<span class="o">]</span>
                                        <span class="o">[</span>--raw_filename RAW_FILENAME<span class="o">]</span>
                                        <span class="o">[</span>--format <span class="o">{</span>TextGrid,eaf,vtc_rttm,alice,its<span class="o">}]</span>
                                        <span class="o">[</span>--filter FILTER<span class="o">]</span>
                                        <span class="nb">source</span>

convert and import a <span class="nb">set</span> of annotations

positional arguments:
  <span class="nb">source</span>                project path

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --annotations ANNOTATIONS
                        path to input annotations dataframe <span class="o">(</span>csv<span class="o">)</span> <span class="o">[</span>only <span class="k">for</span>
                        bulk importation<span class="o">]</span>
  --threads THREADS     amount of threads to run on
  --set SET             name of the annotation <span class="nb">set</span> <span class="o">(</span>e.g. VTC, annotator1,
                        etc.<span class="o">)</span>
  --recording_filename RECORDING_FILENAME
                        recording filename as specified <span class="k">in</span> the recordings
                        index
  --time_seek TIME_SEEK
                        reference <span class="nb">time</span> <span class="k">in</span> seconds, e.g: <span class="m">3600</span>, or <span class="m">3600</span>.500. All
                        <span class="nb">times</span> expressed <span class="k">in</span> the annotations are relative to
                        this time.
  --range_onset RANGE_ONSET
                        covered range start <span class="nb">time</span> <span class="k">in</span> seconds, measured since
                        <span class="sb">`</span>time_seek<span class="sb">`</span>
  --range_offset RANGE_OFFSET
                        covered range end <span class="nb">time</span> <span class="k">in</span> seconds, measured since
                        <span class="sb">`</span>time_seek<span class="sb">`</span>
  --raw_filename RAW_FILENAME
                        annotation input filename location, relative to
                        <span class="sb">`</span>annotations/&lt;set&gt;/raw<span class="sb">`</span>
  --format <span class="o">{</span>TextGrid,eaf,vtc_rttm,alice,its<span class="o">}</span>
                        input annotation format
  --filter FILTER       <span class="nb">source</span> file to filter <span class="k">in</span> <span class="o">(</span><span class="k">for</span> rttm and alice only<span class="o">)</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">import</span><span class="o">-</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> \
   <span class="o">--</span><span class="nb">set</span> <span class="n">eaf</span> \
   <span class="o">--</span><span class="n">recording_filename</span> <span class="n">sound</span><span class="o">.</span><span class="n">wav</span> \
   <span class="o">--</span><span class="n">time_seek</span> <span class="mi">0</span> \
   <span class="o">--</span><span class="n">raw_filename</span> <span class="n">example</span><span class="o">.</span><span class="n">eaf</span> \
   <span class="o">--</span><span class="n">range_onset</span> <span class="mi">0</span> \
   <span class="o">--</span><span class="n">range_offset</span> <span class="mi">300</span> \
   <span class="o">--</span><span class="nb">format</span> <span class="n">eaf</span>
</pre></div>
</div>
<p>Find more information about the allowed values for each parameter, see <a class="reference internal" href="format.html#format-input-annotations"><span class="std std-ref">Annotation importation input format</span></a>.</p>
</div>
<div class="section" id="bulk-importation">
<span id="tools-annotations-bulk-importation"></span><h4>Bulk importation<a class="headerlink" href="#bulk-importation" title="Permalink to this headline">¶</a></h4>
<p>Use this to do bulk importation of many annotation files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">import</span><span class="o">-</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataframe</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<p>The input dataframe <code class="docutils literal notranslate"><span class="pre">/path/to/dataframe.csv</span></code> must have one entry per
annotation to import, according to the format specified at <a class="reference internal" href="format.html#format-input-annotations"><span class="std std-ref">Annotation importation input format</span></a>.</p>
</div>
</div>
<div class="section" id="rename-a-set-of-annotations">
<h3>Rename a set of annotations<a class="headerlink" href="#rename-a-set-of-annotations" title="Permalink to this headline">¶</a></h3>
<p>Rename a set of annotations. This will move the annotations themselves,
and update the index (<code class="docutils literal notranslate"><span class="pre">metadata/annotations.csv</span></code>) accordingly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project rename-annotations /path/to/dataset --help
usage: child-project rename-annotations <span class="o">[</span>-h<span class="o">]</span> --set SET --new-set NEW_SET
                                        <span class="o">[</span>--recursive<span class="o">]</span> <span class="o">[</span>--ignore-errors<span class="o">]</span>
                                        <span class="nb">source</span>

rename a <span class="nb">set</span> of annotations by moving the files and updating the index
accordingly

positional arguments:
  <span class="nb">source</span>             project path

optional arguments:
  -h, --help         show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --set SET          <span class="nb">set</span> to rename
  --new-set NEW_SET  new name <span class="k">for</span> the <span class="nb">set</span>
  --recursive        <span class="nb">enable</span> recursive mode
  --ignore-errors    proceed despite errors
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">rename</span><span class="o">-</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="nb">set</span> <span class="n">vtc</span> <span class="o">--</span><span class="n">new</span><span class="o">-</span><span class="nb">set</span> <span class="n">vtc_1</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-a-set-of-annotations">
<h3>Remove a set of annotations<a class="headerlink" href="#remove-a-set-of-annotations" title="Permalink to this headline">¶</a></h3>
<p>This will deleted converted annotations associated to a given set and
remove them from the index.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project remove-annotations /path/to/dataset --help
usage: child-project remove-annotations <span class="o">[</span>-h<span class="o">]</span> --set SET <span class="o">[</span>--recursive<span class="o">]</span> <span class="nb">source</span>

remove converted annotations of a given <span class="nb">set</span> and their entries <span class="k">in</span> the index

positional arguments:
  <span class="nb">source</span>       project path

optional arguments:
  -h, --help   show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --set SET    <span class="nb">set</span> to remove
  --recursive  <span class="nb">enable</span> recursive mode
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">remove</span><span class="o">-</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="nb">set</span> <span class="n">vtc</span>
</pre></div>
</div>
</div>
<div class="section" id="its-annotations-anonymization">
<h3>ITS annotations anonymization<a class="headerlink" href="#its-annotations-anonymization" title="Permalink to this headline">¶</a></h3>
<p>LENA .its files might contain information that can help recover the identity of the participants, which may be undesired.
This command anonymizes .its files, based on a routine by <a class="reference external" href="https://github.com/HomeBankCode/ITS_annonymizer">HomeBank</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project anonymize /path/to/dataset --help
usage: child-project anonymize <span class="o">[</span>-h<span class="o">]</span> --input-set INPUT_SET --output-set
                               OUTPUT_SET
                               <span class="o">[</span>--replacements-json-dict REPLACEMENTS_JSON_DICT<span class="o">]</span>
                               path

Anonymize a <span class="nb">set</span> of its annotations <span class="o">(</span><span class="sb">`</span>input_set<span class="sb">`</span><span class="o">)</span> and saves it as <span class="sb">`</span>output_set<span class="sb">`</span>.

positional arguments:
  path                  project path

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --input-set INPUT_SET
                        input annotation <span class="nb">set</span>
  --output-set OUTPUT_SET
                        output annotation <span class="nb">set</span>
  --replacements-json-dict REPLACEMENTS_JSON_DICT
                        path to the replacements configuration <span class="o">(</span>json dict<span class="o">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">anonymize</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> <span class="o">--</span><span class="nb">input</span><span class="o">-</span><span class="nb">set</span> <span class="n">lena</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="nb">set</span> <span class="n">lena</span><span class="o">/</span><span class="n">anonymous</span>
</pre></div>
</div>
</div>
<div class="section" id="merge-annotation-sets">
<h3>Merge annotation sets<a class="headerlink" href="#merge-annotation-sets" title="Permalink to this headline">¶</a></h3>
<p>Some processing tools use pre-existing annotations as an input,
and label the original segments with more information. This is
typically the case of ALICE, which labels segments generated
by the VTC. In this case, one might want to merge the ALICE
and VTC annotations altogether. This can be done with <code class="docutils literal notranslate"><span class="pre">child-project</span> <span class="pre">merge-annotations</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ child-project merge-annotations /path/to/dataset --help
usage: child-project merge-annotations <span class="o">[</span>-h<span class="o">]</span> --left-set LEFT_SET --right-set
                                       RIGHT_SET --left-columns LEFT_COLUMNS
                                       --right-columns RIGHT_COLUMNS
                                       --output-set OUTPUT_SET
                                       <span class="o">[</span>--threads THREADS<span class="o">]</span>
                                       <span class="nb">source</span>

merge segments sharing identical onset and offset from two sets of annotations

positional arguments:
  <span class="nb">source</span>                project path

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --left-set LEFT_SET   left <span class="nb">set</span>
  --right-set RIGHT_SET
                        right <span class="nb">set</span>
  --left-columns LEFT_COLUMNS
                        comma-separated columns to merge from the left <span class="nb">set</span>
  --right-columns RIGHT_COLUMNS
                        comma-separated columns to merge from the right <span class="nb">set</span>
  --output-set OUTPUT_SET
                        name of the output <span class="nb">set</span>
  --threads THREADS     amount of threads to run on <span class="o">(</span>default: <span class="m">1</span><span class="o">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">child</span><span class="o">-</span><span class="n">project</span> <span class="n">merge</span><span class="o">-</span><span class="n">annotations</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dataset</span> \
<span class="o">--</span><span class="n">left</span><span class="o">-</span><span class="nb">set</span> <span class="n">vtc</span> \
<span class="o">--</span><span class="n">right</span><span class="o">-</span><span class="nb">set</span> <span class="n">alice</span> \
<span class="o">--</span><span class="n">left</span><span class="o">-</span><span class="n">columns</span> <span class="n">speaker_id</span><span class="p">,</span><span class="n">ling_type</span><span class="p">,</span><span class="n">speaker_type</span><span class="p">,</span><span class="n">vcm_type</span><span class="p">,</span><span class="n">lex_type</span><span class="p">,</span><span class="n">mwu_type</span><span class="p">,</span><span class="n">addresseee</span><span class="p">,</span><span class="n">transcription</span> \
<span class="o">--</span><span class="n">right</span><span class="o">-</span><span class="n">columns</span> <span class="n">phonemes</span><span class="p">,</span><span class="n">syllables</span><span class="p">,</span><span class="n">words</span> \
<span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="nb">set</span> <span class="n">alice_vtc</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="zooniverse.html" class="btn btn-neutral float-right" title="Zooniverse" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="vandam.html" class="btn btn-neutral float-left" title="Converting a dataset" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Lucas Gautheron.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>